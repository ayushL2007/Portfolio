<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

<div id="cursor-glow"></div>

<div class="audio-toggle-btn" onclick="toggleAudio()">
    <div id="audio-icon-container">
        <i class="fas fa-volume-mute" id="audio-fa-icon"></i>
    </div>
</div>

<audio id="lofi-player" loop src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"></audio>

<style>
    /* 1. Theme Configuration */
    :root {
        --bg-dark: #1b1b35;
        --glow-color: rgba(230, 126, 178, 0.52); /* Fainter yellow for dark mode */
        --glow-active: rgba(255, 0, 119, 0.4);
        --accent-yellow: #f10f53;
    }

    /* Apply dark background to the parent container */
    html, body {
        background-color: var(--bg-dark) !important;
        color: #292929;
    }

    /* 2. Darker, More Subtle Glow */
    #cursor-glow {
        position: fixed;
        top: 0;
        left: 0;
        width: 120px; /* Slightly larger for a softer ambient feel */
        height: 120px;
        background: radial-gradient(circle, var(--glow-color) 0%, transparent 75%);
        border-radius: 50%;
        pointer-events: none;
        transform: translate(-50%, -50%);
        z-index: 9999;
        filter: blur(25px); /* Heavier blur for a more 'organic' dark glow */
        transition: transform 0.2s ease-out, background 0.3s ease;
    }

    /* 3. Dark Mode Audio Button */
    .audio-toggle-btn {
        position: fixed;
        top: 30px;
        left: 30px;
        width: 48px;
        height: 48px;
        cursor: pointer;
        z-index: 1000;
    }

    #audio-icon-container {
        width: 100%;
        height: 100%;
        border-radius: 12px; /* Modern squircle look */
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(255, 255, 255, 0.03);
        color: #555;
        border: 1px solid rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(10px);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Active State (Music Playing) */
    .audio-active #audio-icon-container {
        background: rgba(241, 15, 90, 0.1);
        color: var(--accent-yellow);
        border-color: rgba(241, 15, 113, 0.3);
        box-shadow: 0 0 30px rgba(0, 0, 0, 0.5), inset 0 0 10px rgba(241, 196, 15, 0.1);
        animation: pulse-dark 2.5s infinite;
    }

    @keyframes pulse-dark {
        0%, 100% { opacity: 1; transform: scale(1); }
        50% { opacity: 0.7; transform: scale(1.05); }
    }

    /* Button Hover Effect */
    .audio-toggle-btn:hover #audio-icon-container {
        border-color: rgba(255, 255, 255, 0.2);
        color: #fff;
    }
</style>

<script>
    (function() {
        const glow = document.getElementById('cursor-glow');
        const audio = document.getElementById('lofi-player');
        const btn = document.querySelector('.audio-toggle-btn');
        const icon = document.getElementById('audio-fa-icon');

        // Smooth Mouse Tracking
        window.addEventListener('mousemove', (e) => {
            requestAnimationFrame(() => {
                glow.style.left = `${e.clientX}px`;
                glow.style.top = `${e.clientY}px`;
            });
        });

        // Click Logic for Ambient Glow
        window.addEventListener('mousedown', () => {
            glow.style.transform = 'translate(-50%, -50%) scale(1.8)';
            glow.style.background = `radial-gradient(circle, var(--glow-active) 0%, transparent 75%)`;
        });

        window.addEventListener('mouseup', () => {
            glow.style.transform = 'translate(-50%, -50%) scale(1)';
            glow.style.background = `radial-gradient(circle, var(--glow-color) 0%, transparent 75%)`;
        });

        // Toggle Audio
        window.toggleAudio = function() {
            if (audio.paused) {
                audio.play();
                audio.volume = 0.3; // Low volume for dark/moody vibe
                btn.classList.add('audio-active');
                icon.classList.replace('fa-volume-mute', 'fa-volume-up');
            } else {
                audio.pause();
                btn.classList.remove('audio-active');
                icon.classList.replace('fa-volume-up', 'fa-volume-mute');
            }
        };
    })();
</script>